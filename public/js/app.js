var possible=["/img/fotos.jpg","/img/gebruik.jpg","/img/iphone.jpg","/img/mensen.jpg"],koala={version:"1.8.2"};!function(t,e){function n(t,e){var n=[];return function(e,r,o){if(!(e<0||r<0)){if(3===arguments.length)return n[t*e+r]=o;if(2===arguments.length)return n[t*e+r];throw new TypeError("Bad number of arguments")}}}function r(t,e,n,r){return[(t[0]+e[0]+n[0]+r[0])/4,(t[1]+e[1]+n[1]+r[1])/4,(t[2]+e[2]+n[2]+r[2])/4]}function o(t,e,n,r,o,a,i,l){this.vis=t,this.x=r*(e+.5),this.y=r*(n+.5),this.size=r,this.color=o,this.rgb=d3.rgb(o[0],o[1],o[2]),this.children=a,this.layer=i,this.onSplit=l}function a(t,e){"LayerClear"===t&&0===e&&(document.getElementById("msg").classList.add("show"),clearInterval(f)),"LayerClear"===t&&5===e&&(clearInterval(u),f=setInterval(i,100))}function i(){++g,y.innerHTML=l(g)}function l(t){return s(t/10/60%60,2)+":"+s(t/10%60,2)+","+s(t%10,1)}function s(t,e){return((t=Math.floor(t))+"").length<e?"0"+t:t}koala.supportsCanvas=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},koala.supportsSVG=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},o.prototype.isSplitable=function(){return this.node&&this.children},o.prototype.split=function(){this.isSplitable()&&(d3.select(this.node).remove(),delete this.node,o.addToVis(this.vis,this.children),this.onSplit(this))},o.prototype.checkIntersection=function(t,e){var n=this.x-e[0],r=this.y-e[1],o=this.x-t[0],a=this.y-t[1],i=this.size/2;return i*=i,n*n+r*r<=i&&o*o+a*a>i},o.addToVis=function(t,e,n){var r=t.selectAll(".nope").data(e).enter().append("circle");(r=n?r.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",4).attr("fill","#ffffff").transition().duration(1e3):r.attr("cx",function(t){return t.parent.x}).attr("cy",function(t){return t.parent.y}).attr("r",function(t){return t.parent.size/2}).attr("fill",function(t){return String(t.parent.rgb)}).attr("fill-opacity",.68).transition().duration(300)).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.size/2}).attr("fill",function(t){return String(t.rgb)}).attr("fill-opacity",1).each("end",function(t){t.node=this})};var c,u,f,d=document.getElementById("dots").offsetWidth-40,h=256===d?4:8,p=d/h,v=document.getElementById("start"),m=!1,g=0,y=document.getElementsByTagName("time")[0];if(koala.loadImage=function(t){var e=document.createElement("canvas").getContext("2d");return e.drawImage(t,0,0,p,p),e.getImageData(0,0,p,p).data},koala.makeCircles=function(t,e,a){function i(t){var e=Math.floor(t[0]/h),n=Math.floor(t[1]/h),r=I(e,n);if(!r)return null;for(;r&&!r.isSplitable();)r=r.parent;return r||null}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e,n){for(var r=[],o=l(t,e),a=Math.max(Math.ceil(o/n),1),i=(e[0]-t[0])/a,s=(e[1]-t[1])/a,c=t[0],u=t[1],f=0;f<=a;f++)r.push([c+i*f,u+s*f]);return r}function f(t,e){for(var n=s(t,e,4),r=0;r<n.length-1;r++){var o=n[r],a=n[r+1],l=i(a);l&&l.isSplitable()&&l.checkIntersection(o,a)&&l.split()}}function v(){for(var t=d3.event.changedTouches,e=0;e<t.length;e++){var n=t.item(e);N[n.identifier]=null}d3.event.preventDefault()}a=a||function(){};var g=[],y=0,w=0;c?c.selectAll("circle").remove():c=d3.select(t).append("svg").attr("width",d).attr("height",d);var k,S,x,I=n(p),b=h,C=0;for(S=0;S<p;S++)for(k=0;k<p;k++)x=[e[C],e[C+1],e[C+2]],I(k,S,new o(c,k,S,b,x)),C+=4;for(var E,M,T,L,V,B=I,F=0;b<d;){for(b*=2,E=n(p/=2),S=0;S<p;S++)for(k=0;k<p;k++)M=B(2*k,2*S),T=B(2*k+1,2*S),L=B(2*k,2*S+1),V=B(2*k+1,2*S+1),x=r(M.color,T.color,L.color,V.color),M.parent=T.parent=L.parent=V.parent=E(k,S,new o(c,k,S,b,x,[M,T,L,V],F,function(t){var e=t.layer;g[e]--,0===g[e]&&a("LayerClear",e),1-d3.sum(g)/y>=w&&(a("PercentClear",Math.round(100*w)),w+=.05)}));g.push(p*p),y+=p*p,F++,B=E}o.addToVis(c,[E(0,0)],!0);var D=null,N={};d3.select("div#dots").on("mousemove.koala",function(){var t=d3.mouse(c.node());isNaN(t[0])?D=null:(D&&f(D,t),D=t,d3.event.preventDefault())}).on("touchmove.koala",function(){for(var t=d3.touches(c.node()),e=0;e<t.length;e++){var n=t[e],r=N[n.identifier];r&&f(r,n),N[n.identifier]=n}d3.event.preventDefault()}).on("touchend.koala",v).on("touchcancel.koala",v),u=setInterval(function(){m&&f([0,0],[125,125])},100)},t.shownFile="none",koala.supportsCanvas())if(koala.supportsSVG()){var w=function(t){var e=possible[Math.floor(Math.random()*possible.length)];return{file:e,shownFile:t.protocol+"//"+t.host+e}}(location);if(w){var k=w.file;t.shownFile=w.shownFile;var S=new Image;S.onload=function(){var t;(t=koala.loadImage(this))&&koala.makeCircles("#dots",t,a)},S.src=k,v.addEventListener("click",function(t){t.preventDefault(),document.getElementById("game").removeAttribute("class"),m=!0})}}else alert("Sorry, Je moet de site openen in een browser die SVG ondersteund. Zoals: Chrome, Safari, Firefox, Opera, en Internet Explorer vanaf versie 10");else alert("Sorry, Je moet de site openen in een browser die HTML5 Canvas ondersteund. Zoals: Chrome, Safari, Firefox, Opera, en Internet Explorer vanaf versie 10")}(window);