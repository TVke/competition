var koala={version:"1.8.2"};!function(t){function e(t,e){var n=[];return function(e,r,o){if(!(e<0||r<0)){if(3===arguments.length)return n[t*e+r]=o;if(2===arguments.length)return n[t*e+r];throw new TypeError("Bad number of arguments")}}}function n(t,e,n,r){return[(t[0]+e[0]+n[0]+r[0])/4,(t[1]+e[1]+n[1]+r[1])/4,(t[2]+e[2]+n[2]+r[2])/4]}function r(t,e,n,r,o,a,i,l){this.vis=t,this.x=r*(e+.5),this.y=r*(n+.5),this.size=r,this.color=o,this.rgb=d3.rgb(o[0],o[1],o[2]),this.children=a,this.layer=i,this.onSplit=l}function o(t,e){"LayerClear"===t&&0===e&&document.getElementById("msg").classList.add("show")}koala.supportsCanvas=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},koala.supportsSVG=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},r.prototype.isSplitable=function(){return this.node&&this.children},r.prototype.split=function(){this.isSplitable()&&(d3.select(this.node).remove(),delete this.node,r.addToVis(this.vis,this.children),this.onSplit(this))},r.prototype.checkIntersection=function(t,e){var n=this.x-e[0],r=this.y-e[1],o=this.x-t[0],a=this.y-t[1],i=this.size/2;return i*=i,n*n+r*r<=i&&o*o+a*a>i},r.addToVis=function(t,e,n){var r=t.selectAll(".nope").data(e).enter().append("circle");(r=n?r.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",4).attr("fill","#ffffff").transition().duration(1e3):r.attr("cx",function(t){return t.parent.x}).attr("cy",function(t){return t.parent.y}).attr("r",function(t){return t.parent.size/2}).attr("fill",function(t){return String(t.parent.rgb)}).attr("fill-opacity",.68).transition().duration(300)).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.size/2}).attr("fill",function(t){return String(t.rgb)}).attr("fill-opacity",1).each("end",function(t){t.node=this})};var a,i=document.getElementById("dots").offsetWidth-40,l=256===i?4:8,s=i/l;if(koala.loadImage=function(t){var e=document.createElement("canvas").getContext("2d");return e.drawImage(t,0,0,s,s),e.getImageData(0,0,s,s).data},koala.makeCircles=function(t,o,c){function u(t){var e=Math.floor(t[0]/l),n=Math.floor(t[1]/l),r=k(e,n);if(!r)return null;for(;r&&!r.isSplitable();)r=r.parent;return r||null}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function d(t,e,n){for(var r=[],o=f(t,e),a=Math.max(Math.ceil(o/n),1),i=(e[0]-t[0])/a,l=(e[1]-t[1])/a,s=t[0],c=t[1],u=0;u<=a;u++)r.push([s+i*u,c+l*u]);return r}function h(t,e){for(var n=d(t,e,4),r=0;r<n.length-1;r++){var o=n[r],a=n[r+1],i=u(a);i&&i.isSplitable()&&i.checkIntersection(o,a)&&i.split()}}function p(){for(var t=d3.event.changedTouches,e=0;e<t.length;e++){var n=t.item(e);D[n.identifier]=null}d3.event.preventDefault()}c=c||function(){};var v=[],m=0,g=0;a?a.selectAll("circle").remove():a=d3.select(t).append("svg").attr("width",i).attr("height",i);var y,w,S,k=e(s),x=l,b=0;for(w=0;w<s;w++)for(y=0;y<s;y++)S=[o[b],o[b+1],o[b+2]],k(y,w,new r(a,y,w,x,S)),b+=4;for(var C,I,E,M,V,F=k,T=0;x<i;){for(x*=2,C=e(s/=2),w=0;w<s;w++)for(y=0;y<s;y++)I=F(2*y,2*w),E=F(2*y+1,2*w),M=F(2*y,2*w+1),V=F(2*y+1,2*w+1),S=n(I.color,E.color,M.color,V.color),I.parent=E.parent=M.parent=V.parent=C(y,w,new r(a,y,w,x,S,[I,E,M,V],T,function(t){var e=t.layer;v[e]--,0===v[e]&&c("LayerClear",e),1-d3.sum(v)/m>=g&&(c("PercentClear",Math.round(100*g)),g+=.05)}));v.push(s*s),m+=s*s,T++,F=C}r.addToVis(a,[C(0,0)],!0);var z=null,D={};d3.select("div#dots").on("mousemove.koala",function(){var t=d3.mouse(a.node());isNaN(t[0])?z=null:(z&&h(z,t),z=t,d3.event.preventDefault())}).on("touchmove.koala",function(){for(var t=d3.touches(a.node()),e=0;e<t.length;e++){var n=t[e],r=D[n.identifier];r&&h(r,n),D[n.identifier]=n}d3.event.preventDefault()}).on("touchend.koala",p).on("touchcancel.koala",p)},t.shownFile="none",koala.supportsCanvas())if(koala.supportsSVG()){var c=function(t){var e=possible[Math.floor(Math.random()*possible.length)];return{file:e,shownFile:t.protocol+"//"+t.host+e}}(location);if(c){var u=c.file;t.shownFile=c.shownFile;var f=new Image;f.onload=function(){var t;(t=koala.loadImage(this))&&koala.makeCircles("#dots",t,o)},f.src=u}}else alert("Sorry, Je moet de site openen in een browser die SVG ondersteund. Zoals: Chrome, Safari, Firefox, Opera, en Internet Explorer vanaf versie 10");else alert("Sorry, Je moet de site openen in een browser die HTML5 Canvas ondersteund. Zoals: Chrome, Safari, Firefox, Opera, en Internet Explorer vanaf versie 10")}(window);